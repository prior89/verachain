"use strict";(self.webpackChunkverachain_frontend=self.webpackChunkverachain_frontend||[]).push([[56],{56:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var s=t(555),n=t(43),i=t(216),r=t(200),c=t(546),o=t(579);const l=e=>{let{certificate:a,onClick:t}=e;const[s,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!1),h={initial:{x:"-100%"},animate:{x:"100%",transition:{repeat:1/0,duration:3,ease:"linear"}}},u={initial:{y:0},animate:{y:[-5,5,-5],transition:{repeat:1/0,duration:4,ease:"easeInOut"}}};return a?(0,o.jsxs)(r.P.div,{className:"nft-card-container",initial:"initial",animate:s?"flipped":"initial",whileHover:"hover",variants:{initial:{rotateY:0,scale:1},flipped:{rotateY:180,transition:{duration:.6,type:"spring",stiffness:260,damping:20}},hover:{scale:1.05,boxShadow:"0 20px 60px rgba(212, 175, 55, 0.4)",transition:{duration:.3,ease:"easeOut"}}},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:e=>{e.stopPropagation(),i(!s)},style:{transformStyle:"preserve-3d"},children:[(0,o.jsxs)(r.P.div,{className:"card-face card-front",style:{backfaceVisibility:"hidden"},children:[(0,o.jsx)("div",{className:"holographic-bg"}),(0,o.jsx)(r.P.div,{className:"shimmer-effect",variants:h,initial:"initial",animate:l?"animate":"initial"}),(0,o.jsxs)("div",{className:"card-header",children:[(0,o.jsx)(r.P.div,{className:"brand-logo",variants:u,initial:"initial",animate:"animate",children:(0,o.jsx)("span",{className:"brand-name",children:a.brand})}),(0,o.jsxs)(r.P.div,{className:"verified-badge",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:["CERT",(0,o.jsx)("span",{children:"VERIFIED"})]})]}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsx)(r.P.h2,{className:"product-name",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:a.productName||a.model}),(0,o.jsx)(r.P.p,{className:"product-category",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:a.category}),(0,o.jsxs)(r.P.div,{className:"confidence-meter",initial:{width:0},animate:{width:"100%"},transition:{delay:.4,duration:.8},children:[(0,o.jsxs)("div",{className:"confidence-label",children:[(0,o.jsx)("span",{children:"Authentication Score"}),(0,o.jsxs)("span",{className:"confidence-value",children:[a.confidence,"%"]})]}),(0,o.jsx)("div",{className:"confidence-bar",children:(0,o.jsx)(r.P.div,{className:"confidence-fill",initial:{width:0},animate:{width:"".concat(a.confidence,"%")},transition:{delay:.6,duration:1,ease:"easeOut"},style:{background:a.confidence>90?"linear-gradient(90deg, #00C896, #00F5B8)":a.confidence>80?"linear-gradient(90deg, #FFB800, #FFD700)":"linear-gradient(90deg, #FF6B60, #FF3B30)"}})})]})]}),(0,o.jsx)("div",{className:"card-footer",children:(0,o.jsxs)(r.P.div,{className:"cert-info",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("span",{className:"icon-text",children:"CERT"}),(0,o.jsx)("span",{className:"info-label",children:"Certificate"}),(0,o.jsxs)("span",{className:"info-value",children:["#",a.displayId]})]}),(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("span",{className:"icon-text",children:"DATE"}),(0,o.jsx)("span",{className:"info-label",children:"Issued"}),(0,o.jsx)("span",{className:"info-value",children:(new Date).toLocaleDateString()})]})]})}),(0,o.jsx)(c.N,{children:l&&(0,o.jsx)(o.Fragment,{children:[...Array(5)].map((e,a)=>(0,o.jsx)(r.P.div,{className:"floating-particle",initial:{opacity:0,scale:0,x:200*Math.random()-100,y:200*Math.random()-100},animate:{opacity:[0,1,0],scale:[0,1,0],x:400*Math.random()-200,y:400*Math.random()-200},exit:{opacity:0,scale:0},transition:{duration:2+2*Math.random(),delay:.1*a,repeat:1/0}},a))})})]}),(0,o.jsxs)(r.P.div,{className:"card-face card-back",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[(0,o.jsx)("div",{className:"holographic-bg"}),(0,o.jsxs)("div",{className:"blockchain-header",children:[(0,o.jsx)("h3",{children:"Blockchain Certificate"}),(0,o.jsxs)("div",{className:"network-badge",children:[(0,o.jsx)("span",{className:"network-icon",children:"NET"}),(0,o.jsx)("span",{children:"Polygon Amoy"})]})]}),(0,o.jsxs)("div",{className:"blockchain-info",children:[(0,o.jsxs)(r.P.div,{className:"info-row",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[(0,o.jsx)("span",{className:"icon-text",children:"BLK"}),(0,o.jsx)("span",{className:"label",children:"Block"}),(0,o.jsxs)("span",{className:"value",children:["#",a.blockNumber||"000000"]})]}),(0,o.jsxs)(r.P.div,{className:"info-row",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[(0,o.jsx)("span",{className:"icon-text",children:"TOK"}),(0,o.jsx)("span",{className:"label",children:"Token ID"}),(0,o.jsxs)("span",{className:"value",children:["#",a.tokenId||"PENDING"]})]}),(0,o.jsxs)(r.P.div,{className:"info-row tx-hash",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[(0,o.jsx)("span",{className:"label",children:"Transaction"}),(0,o.jsx)("span",{className:"value",children:a.txHash?"".concat(a.txHash.substring(0,6),"...").concat(a.txHash.slice(-4)):"PENDING"})]})]}),(0,o.jsx)(r.P.div,{className:"qr-section",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.4,type:"spring"},children:(0,o.jsx)("div",{className:"qr-placeholder",children:a.qrCode?(0,o.jsx)("img",{src:a.qrCode,alt:"NFT QR"}):(0,o.jsxs)("div",{className:"qr-generating",children:[(0,o.jsx)(r.P.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2,ease:"linear"},children:(0,o.jsx)("span",{className:"loading-text",children:"QR"})}),(0,o.jsx)("span",{children:"Generating QR..."})]})})}),(0,o.jsx)(r.P.button,{className:"view-blockchain-btn",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),a.txHash&&window.open("https://amoy.polygonscan.com/tx/".concat(a.txHash),"_blank")},children:"View on Blockchain"})]})]}):null};var d=t(722);const h="http://localhost:5001/api",u={async mintNFT(e){try{const a=await d.A.post("".concat(h,"/nft/mint"),{certificateId:e.certificateId,productData:e.productData,certificateData:e.certificateData});return{success:!0,displayId:a.data.displayId,tokenId:a.data.tokenId,txHash:a.data.txHash,blockNumber:a.data.blockNumber,explorer:a.data.explorer}}catch(s){var a,t;return console.error("NFT minting failed:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Minting failed"}}},async transferNFT(e,a){try{const t=await d.A.post("".concat(h,"/nft/transfer"),{tokenId:e,toAddress:a});return{success:!0,displayId:t.data.displayId,newTokenId:t.data.newTokenId,txHash:t.data.txHash,message:t.data.message}}catch(n){var t,s;return console.error("NFT transfer failed:",n),{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.error)||"Transfer failed"}}},async burnNFT(e){try{const a=await d.A.post("".concat(h,"/nft/burn"),{tokenId:e});return{success:!0,message:a.data.message,txHash:a.data.txHash}}catch(s){var a,t;return console.error("NFT burning failed:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Burn failed"}}},async getNFTDetails(e){try{return{success:!0,nft:(await d.A.get("".concat(h,"/nft/").concat(e))).data.nft}}catch(s){var a,t;return console.error("Failed to fetch NFT details:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to get NFT"}}},async getUserNFTs(e){try{const a=await d.A.get("".concat(h,"/nft/user/").concat(e||"me"));return{success:!0,count:a.data.count,nfts:a.data.nfts}}catch(s){var a,t;return console.error("Failed to fetch user NFTs:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to get NFTs"}}},async generateQR(e){try{const a=await d.A.get("".concat(h,"/nft/qr/").concat(e));return{success:!0,qrCode:a.data.qrCode,displayId:a.data.displayId,expiresIn:a.data.expiresIn}}catch(s){var a,t;return console.error("Failed to generate QR code:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"QR generation failed"}}},async scanQRForTransfer(e){try{const a=await d.A.post("".concat(h,"/nft/scan-transfer"),{qrData:e});return{success:!0,readyForTransfer:a.data.readyForTransfer,certificateInfo:a.data.certificateInfo}}catch(s){var a,t;return console.error("QR scan for transfer failed:",s),{success:!1,error:(null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)||"QR scan failed"}}},formatCertificateData(e){var a,t,s;return{displayId:"VERA-2024-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),tokenId:e.tokenId,brand:e.brand||(null===(a=e.productInfo)||void 0===a?void 0:a.brand),model:e.model||(null===(t=e.productInfo)||void 0===t?void 0:t.model),category:e.category||(null===(s=e.productInfo)||void 0===s?void 0:s.category),status:e.status||"verified",verifiedDate:(new Date).toISOString(),confidence:e.confidence||95}},async estimateGas(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mint";try{const a=await d.A.post("".concat(h,"/nft/estimate-gas"),{operation:e});return{success:!0,gasPrice:a.data.gasPrice,estimatedCost:a.data.estimatedCost,network:"Polygon Amoy"}}catch(a){return console.error("Gas estimation failed:",a),{success:!1,error:"Unable to estimate gas"}}}},m=()=>{const e=(0,i.Zp)(),[a,t]=(0,n.useState)([]),[d,h]=(0,n.useState)(!0),[m,p]=(0,n.useState)(null),[f,x]=(0,n.useState)("grid"),[v,j]=(0,n.useState)("all"),[y,g]=(0,n.useState)(""),[N,b]=(0,n.useState)(null),[C,k]=(0,n.useState)(!1),I=(0,n.useCallback)(async()=>{h(!0),p(null);try{const e=await u.getUserNFTs();e.success?t(e.nfts.map(e=>(0,s.A)((0,s.A)({},e),{},{displayId:"VERA-2024-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),verifiedDate:(new Date).toISOString()}))):p(e.error)}catch(e){console.error("Failed to fetch certificates:",e),p("Failed to load certificates"),t([{displayId:"VERA-2024-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),brand:"Chanel",model:"Classic Flap Medium",category:"handbag",tokenId:"123456",status:"verified",confidence:95,verifiedDate:(new Date).toISOString()},{displayId:"VERA-2024-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),brand:"Herm\ucc54s",model:"Birkin 30",category:"handbag",tokenId:"789012",status:"verified",confidence:98,verifiedDate:(new Date).toISOString()},{displayId:"VERA-2024-".concat(Math.random().toString(36).substr(2,6).toUpperCase()),brand:"Rolex",model:"Submariner",category:"watch",tokenId:"345678",status:"verified",confidence:92,verifiedDate:(new Date).toISOString()}])}finally{h(!1)}},[]);(0,n.useEffect)(()=>{I()},[I]);const w=a.filter(e=>{const a="all"===v||e.brand===v,t=""===y||e.brand.toLowerCase().includes(y.toLowerCase())||e.model.toLowerCase().includes(y.toLowerCase());return a&&t}),P=["all",...new Set(a.map(e=>e.brand))],S=e=>{b(e)},F=async a=>{e("/transfer",{state:{tokenId:a}})},R=async e=>{const a=await u.generateQR(e.displayId);a.success&&alert("QR Code generated with fresh ID: "+a.displayId)},T={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}};return(0,o.jsxs)("div",{className:"certificates-screen",children:[(0,o.jsxs)("div",{className:"certificates-header",children:[(0,o.jsx)("button",{className:"back-button",onClick:()=>e(-1),children:(0,o.jsx)("span",{className:"back-text",children:"BACK"})}),(0,o.jsx)("h1",{className:"screen-title",children:"VERIFIED My Certificates"}),(0,o.jsx)(r.P.button,{className:"refresh-button",onClick:async()=>{k(!0),await I(),setTimeout(()=>k(!1),1e3)},animate:C?{rotate:360}:{},transition:{duration:1,ease:"linear"},children:"[Refresh]"})]}),(0,o.jsxs)("div",{className:"stats-bar",children:[(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("span",{className:"stat-label",children:"Total"}),(0,o.jsx)("span",{className:"stat-value",children:a.length})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("span",{className:"stat-label",children:"Verified"}),(0,o.jsx)("span",{className:"stat-value",children:a.filter(e=>"verified"===e.status).length})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("span",{className:"stat-label",children:"Value"}),(0,o.jsx)("span",{className:"stat-value",children:"Private"})," "]})]}),(0,o.jsxs)("div",{className:"controls-bar",children:[(0,o.jsxs)("div",{className:"search-box",children:["[Search]",(0,o.jsx)("input",{type:"text",placeholder:"Search certificates...",value:y,onChange:e=>g(e.target.value)})]}),(0,o.jsxs)("div",{className:"filter-dropdown",children:["[Filter]",(0,o.jsx)("select",{value:v,onChange:e=>j(e.target.value),children:P.map(e=>(0,o.jsx)("option",{value:e,children:"all"===e?"All Brands":e},e))})]}),(0,o.jsxs)("div",{className:"view-toggle",children:[(0,o.jsx)("button",{className:"grid"===f?"active":"",onClick:()=>x("grid"),children:"[Grid]"}),(0,o.jsx)("button",{className:"list"===f?"active":"",onClick:()=>x("list"),children:"[List]"})]})]}),d?(0,o.jsxs)("div",{className:"loading-state",children:[(0,o.jsx)(r.P.div,{animate:{rotate:360},transition:{repeat:1/0,duration:2,ease:"linear"},children:"Loading..."}),(0,o.jsx)("p",{children:"Loading certificates..."})]}):m?(0,o.jsxs)("div",{className:"error-state",children:[(0,o.jsx)("p",{children:m}),(0,o.jsx)("button",{onClick:I,children:"Retry"})]}):0===w.length?(0,o.jsxs)("div",{className:"empty-state",children:["EMPTY",(0,o.jsx)("h3",{children:"No Certificates Found"}),(0,o.jsx)("p",{children:"Start by scanning a product to create your first certificate"}),(0,o.jsx)("button",{onClick:()=>e("/scan"),className:"scan-button",children:"Start Scanning"})]}):(0,o.jsx)(r.P.div,{className:"certificates-container ".concat(f),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,o.jsx)(c.N,{children:w.map(e=>(0,o.jsx)(r.P.div,{variants:T,layout:!0,className:"certificate-item",children:"grid"===f?(0,o.jsx)(l,{certificate:e,onClick:()=>S(e)}):(0,o.jsxs)("div",{className:"list-item",onClick:()=>S(e),children:[(0,o.jsxs)("div",{className:"list-item-left",children:[(0,o.jsx)("div",{className:"brand-badge",children:(0,o.jsx)("span",{children:e.brand})}),(0,o.jsxs)("div",{className:"item-details",children:[(0,o.jsx)("h3",{children:e.model}),(0,o.jsxs)("p",{children:["ID: ",e.displayId]}),(0,o.jsxs)("p",{children:["Verified: ",(new Date).toLocaleDateString()]})]})]}),(0,o.jsxs)("div",{className:"list-item-right",children:[(0,o.jsxs)("div",{className:"confidence-score",children:[(0,o.jsxs)("span",{children:[e.confidence,"%"]}),(0,o.jsx)("span",{className:"label",children:"Confidence"})]}),(0,o.jsxs)("div",{className:"action-buttons",children:[(0,o.jsx)("button",{onClick:a=>{a.stopPropagation(),R(e)},className:"action-btn qr",children:"[QR]"}),(0,o.jsx)("button",{onClick:a=>{a.stopPropagation(),F(e.tokenId)},className:"action-btn transfer",children:"[Send]"}),(0,o.jsx)("button",{onClick:a=>{a.stopPropagation(),(async e=>{window.confirm("Are you sure? This action cannot be undone.")&&(await u.burnNFT(e)).success&&await I()})(e.tokenId)},className:"action-btn burn",children:"[Burn]"})]})]})]})},e.displayId))})}),(0,o.jsx)(c.N,{children:N&&(0,o.jsx)(r.P.div,{className:"certificate-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>b(null),children:(0,o.jsxs)(r.P.div,{className:"modal-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,o.jsx)(l,{certificate:N}),(0,o.jsxs)("div",{className:"modal-actions",children:[(0,o.jsx)("button",{onClick:()=>R(N),children:"[QR] Generate QR"}),(0,o.jsx)("button",{onClick:()=>F(N.tokenId),children:"[Send] Transfer"}),(0,o.jsx)("button",{onClick:()=>b(null),children:"Close"})]})]})})})]})}},546:(e,a,t)=>{t.d(a,{N:()=>v});var s=t(579),n=t(43),i=t(809),r=t(930),c=t(674),o=t(51);class l extends n.Component{getSnapshotBeforeUpdate(e){const a=this.props.childRef.current;if(a&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=a.offsetHeight||0,e.width=a.offsetWidth||0,e.top=a.offsetTop,e.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:a,isPresent:t}=e;const i=(0,n.useId)(),r=(0,n.useRef)(null),c=(0,n.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,n.useContext)(o.Q);return(0,n.useInsertionEffect)(()=>{const{width:e,height:a,top:s,left:n}=c.current;if(t||!r.current||!e||!a)return;r.current.dataset.motionPopId=i;const o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(a,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[t]),(0,s.jsx)(l,{isPresent:t,childRef:r,sizeRef:c,children:n.cloneElement(a,{ref:r})})}const h=e=>{let{children:a,initial:t,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:h,mode:m}=e;const p=(0,r.M)(u),f=(0,n.useId)(),x=(0,n.useCallback)(e=>{p.set(e,!0);for(const a of p.values())if(!a)return;o&&o()},[p,o]),v=(0,n.useMemo)(()=>({id:f,initial:t,isPresent:i,custom:l,onExitComplete:x,register:e=>(p.set(e,!1),()=>p.delete(e))}),h?[Math.random(),x]:[i,x]);return(0,n.useMemo)(()=>{p.forEach((e,a)=>p.set(a,!1))},[i]),n.useEffect(()=>{!i&&!p.size&&o&&o()},[i]),"popLayout"===m&&(a=(0,s.jsx)(d,{isPresent:i,children:a})),(0,s.jsx)(c.t.Provider,{value:v,children:a})};function u(){return new Map}var m=t(917);const p=e=>e.key||"";function f(e){const a=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&a.push(e)}),a}var x=t(293);const v=e=>{let{children:a,custom:t,initial:c=!0,onExitComplete:o,presenceAffectsLayout:l=!0,mode:d="sync",propagate:u=!1}=e;const[v,j]=(0,m.xQ)(u),y=(0,n.useMemo)(()=>f(a),[a]),g=u&&!v?[]:y.map(p),N=(0,n.useRef)(!0),b=(0,n.useRef)(y),C=(0,r.M)(()=>new Map),[k,I]=(0,n.useState)(y),[w,P]=(0,n.useState)(y);(0,x.E)(()=>{N.current=!1,b.current=y;for(let e=0;e<w.length;e++){const a=p(w[e]);g.includes(a)?C.delete(a):!0!==C.get(a)&&C.set(a,!1)}},[w,g.length,g.join("-")]);const S=[];if(y!==k){let e=[...y];for(let a=0;a<w.length;a++){const t=w[a],s=p(t);g.includes(s)||(e.splice(a,0,t),S.push(t))}return"wait"===d&&S.length&&(e=S),P(f(e)),void I(y)}const{forceRender:F}=(0,n.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:w.map(e=>{const a=p(e),n=!(u&&!v)&&(y===w||g.includes(a));return(0,s.jsx)(h,{isPresent:n,initial:!(N.current&&!c)&&void 0,custom:n?void 0:t,presenceAffectsLayout:l,mode:d,onExitComplete:n?void 0:()=>{if(!C.has(a))return;C.set(a,!0);let e=!0;C.forEach(a=>{a||(e=!1)}),e&&(null===F||void 0===F||F(),P(b.current),u&&(null===j||void 0===j||j()),o&&o())},children:e},a)})})}}}]);
//# sourceMappingURL=56.36f4c6bd.chunk.js.map